<div class="botao" *ngIf="!show && !show_details">
  <button type="button" class="botao_registrar" id="openPopup" (click)="open()">REGISTRAR</button>
</div>
<div id="map"></div>

<div class="popup" id="popup" *ngIf="show">
  <div class="close-btn" (click)="endForm()">&times;</div>
  <div class="form">
    <h2>Registro</h2>
    <div class="form-element">
      <div class="row">
        <label for="">Qual o problema ? </label>
        <select name="" id="register_problem" [(ngModel)]="register_problem">
          <option *ngFor="let s of problem" value="{{s.name}}">{{s.name}}
          </option>
        </select>
        <label for="">Descrição detalhada:</label>
        <input type="text" [(ngModel)]="description_problem" />
        <label for="">Localização:</label>
        <input type="text" [(ngModel)]="greenActive" disabled>
        <form (ngSubmit)="uploadImage()" #imageForm="ngForm">
          <input type="file" (change)="onFileSelected($event)" accept="image/*" />
          <button class="botao_registro" (click)="CreateRegister()">REGISTRAR</button>
        </form>
        

        <!-- <label>Status</label>
        <select name="" id="" [(ngModel)]="register_status">
          <option *ngFor="let s of status" value="{{s.name}}">{{s.name}}
          </option>
        </select> -->
        <!-- <input type="file" (change)="handleFileInput($event)"> -->
      </div>
      <!-- <div *ngIf="photo">
        <webcam [height]="250" 
                [width]="250" 
                [trigger]="triggerObservable"
                (imageCapture)="handleImage($event)">
         </webcam>
          
        <button class="actionBtn" (click)="triggerSnapshot();">
            Foto salva</button>
          
        <div class="snapshot" *ngIf="webcamImage">
          <h2>olha ai cabaço</h2>
          <img [src]="webcamImage.imageAsDataUrl"/>
        </div>
      </div> -->

      <!-- <button class="botao_registro" (click)="photoPrint()">TIRAR FOTO</button> -->

    </div>
  </div>
</div>

<!-- Popup de detalhes -->
<div class="popup_details" id="popup_details" *ngIf="show_details">
  <div class="close-btn" (click)="end_details()">&times;</div>
  <div class="form">
    <h2>Detalhes</h2>
    <div class="form-element">
      <div class="row">
        <!-- <img [src]="imageSrc | async" alt="Minha Imagem" /> -->
        <label for="">Problema: </label>
        <input type="text"  disabled [(ngModel)]="name_problems"/>
        <label for="">Descrição detalhada:</label>
        <input type="text" [(ngModel)]="description_details" disabled />
        <label for="">Localização:</label>
        <input type="text" [(ngModel)]="name_problems" disabled />
        <label for="">Data:</label>
        <input type="text" [(ngModel)]="dataFormatada" disabled />
        <label>Status</label>
        <select name="" id="" [(ngModel)]="name_status">
          <option *ngFor="let s of status" value="{{s.name}}">{{s.name}}
          </option>
        </select>
        <img [src]="imageUrl" alt="Imagem Firebase">
        <button class="botao_registro" (click)="updateStatus()">ATUALIZAR</button>
      </div>
    </div>
  </div>
</div>